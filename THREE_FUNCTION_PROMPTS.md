# 三种功能的完整Prompt

## 功能1：自动跨学科概念发现（Auto Cross-Discipline Discovery）

**位置：** `backend/api/real_node_generator.py` Line 75-119

**System Prompt:**
```
你是跨学科知识挖掘专家，擅长发现不同领域间的深层原理关联和结构同构性。
你的核心能力是识别'远亲概念' - 那些表面看起来毫不相关，但底层数学、物理或
信息论原理完全一致的概念。
```

**User Prompt:**
```
你是一个跨学科知识挖掘专家。请为概念"{parent_concept}"挖掘{max_count}个跨领域的相关概念。

【核心任务】发现跨学科的"远亲概念" - 不同领域中原理相通的概念

【跨学科搜索策略】
必须从以下不同领域寻找概念（每个领域至少1个）：
1. 数学/统计学：寻找数学本质、理论基础
2. 物理学：寻找物理类比、能量/信息原理
3. 生物学/神经科学：寻找仿生学启发、演化机制
4. 计算机科学：寻找算法实现、工程应用
5. 社会学/经济学：寻找群体行为、博弈模型
6. 其他交叉学科：心理学、语言学、复杂系统等

【远亲概念判定标准】
✅ 好的远亲概念（必须满足至少一条）：
- 数学形式相同但应用领域不同（如：熵在热力学vs信息论）
- 底层原理一致（如：神经网络vs生物神经元、PageRank vs随机游走）
- 历史启发关系（如：遗传算法vs达尔文进化论）
- 结构同构（如：社交网络vs蛋白质网络）

❌ 避免的表面关联：
- 仅仅名字相似（如："网络"在计算机网络vs神经网络）
- 单纯的应用关系（如：机器学习用于医疗诊断）

【约束条件】
- 不要包含已存在的概念：{existing_str}
- 每个概念必须来自不同学科（避免扎堆）
- 必须解释跨学科关联的底层原理

【输出格式】（每行一个概念）
概念名|学科|关系类型|跨学科原理

示例：
神经网络|生物学|bio_inspired|模拟生物神经元的突触连接和激活传播机制
信息熵|物理学|mathematical_analogy|与热力学熵数学形式完全一致(H=-Σp·log(p))
PageRank算法|图论|structural_isomorphism|本质是马尔可夫链的平稳分布求解
遗传算法|进化生物学|evolutionary_mechanism|复制达尔文的变异-选择-遗传进化过程

请直接输出{max_count}个跨学科概念，不要解释：
```

**参数：**
- Model: `google/gemini-3-flash-preview`
- Temperature: `0.4`
- Max Tokens: `800`
- Reasoning: `enabled`

---

## 功能2：指定学科的概念挖掘（Disciplined Discovery）

**位置：** `backend/api/multi_function_generator.py` Line 39-107

**System Prompt:**
```
你是跨学科知识挖掘专家，严格按照指定学科范围生成概念。
```

**User Prompt:**
```
你是跨学科知识挖掘专家。

任务：为概念"{parent_concept}"在指定学科中生成{max_count}个相关概念。

**仅在以下学科中寻找**：
{discipline_list}

严格要求：
1. **只能从上述指定学科中选择概念**，不得跨越到其他领域
2. 如果某个学科与该概念关联性弱，可以选择该学科中的"桥梁概念"（即连接性概念）
3. 必须解释每个概念与"{parent_concept}"在该学科视角下的关联
4. 每个学科至少生成1个概念（如果可能）

输出格式（每行一个概念，不要序号）：
概念名|学科|关系类型|学科视角下的关联原理

示例（假设指定学科为"生物学"和"数学"）：
输入：神经网络
输出：
突触传递|生物学|生物灵感|神经元间信号传递机制
Hebbian学习|生物学|学习规则|同步激活的神经元连接增强
梯度下降|数学|优化算法|损失函数最小化的迭代方法
反向传播|数学|计算方法|链式法则求导数传播误差

请直接输出：
```

**参数：**
- Model: `google/gemini-3-flash-preview`
- Temperature: `0.4`
- Max Tokens: `800`
- Reasoning: `enabled`

---

## 功能3：多概念桥梁发现（Bridge Discovery）

**位置：** `backend/api/multi_function_generator.py` Line 170-261

**System Prompt:**
```
你是跨学科概念连接专家，擅长发现看似无关概念之间的深层联系。
```

**User Prompt:**
```
你是跨学科概念连接专家，擅长发现看似无关概念之间的深层联系。

任务：分析以下多个概念之间的跨学科联系，找到连接它们的"桥梁概念"。

输入概念：
{concept_list}

核心要求：
1. **寻找桥梁概念**：能够同时关联多个输入概念的中间概念
2. **跨学科路径**：优先选择能够跨越不同学科的连接
3. **原理性关联**：必须基于共同的数学原理、物理规律或方法论

桥梁概念的三个层次：
- **直接桥梁**（优先）：与所有输入概念都有明确关联
  例：熵 + 最小二乘法 → 信息论（两者都涉及不确定性度量）
  
- **间接桥梁**（次选）：通过1-2步可连接所有概念
  例：熵 + 最小二乘法 → 概率论 → 统计推断
  
- **原理性桥梁**（补充）：体现相同的数学/哲学原理
  例：熵 + 最小二乘法 → 优化理论（两者都涉及最优化）

输出格式（每行一个桥梁概念，不要序号）：
概念名|桥梁类型|关联的输入概念|连接原理

桥梁类型：直接桥梁/间接桥梁/原理性桥梁
关联的输入概念：用逗号分隔，如"熵,最小二乘法"

示例：
输入概念：["熵", "最小二乘法"]

输出：
信息论|直接桥梁|熵,最小二乘法|熵度量信息不确定性，最小二乘基于信息损失最小化
统计推断|直接桥梁|熵,最小二乘法|最大熵原理和最小二乘估计都是统计推断方法
优化理论|原理性桥梁|熵,最小二乘法|熵最大化和误差最小化都是优化问题
概率分布|间接桥梁|熵,最小二乘法|熵描述分布不确定性，最小二乘假设正态分布
贝叶斯推理|直接桥梁|熵,最小二乘法|最大熵先验+最小二乘似然=后验估计

请直接输出至少{max_bridges}个桥梁概念：
```

**参数：**
- Model: `google/gemini-3-flash-preview`
- Temperature: 0.4
- Max Tokens: 1000
- Reasoning: enabled

---

## 总结

### 共同特点：
1. 都使用 `google/gemini-3-flash-preview` 模型
2. 都启用 `reasoning` 模式（推理增强）
3. Temperature 都是 0.4（平衡创造性和准确性）
4. 输出格式统一：`概念名|学科|关系类型|原理`

### 核心差异：
- **功能1**：自动跨学科挖掘，无学科限制，追求"远亲概念"
- **功能2**：限定学科范围，定向挖掘
- **功能3**：多概念连接，寻找"桥梁概念"

### 学术过滤：
所有三个功能在生成后都会通过 `is_academic_concept()` 进行学术性过滤
