# LLM Prompt è®¾è®¡ä¸ç›¸ä¼¼åº¦è®¡ç®—è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•
1. [LLM Prompt æ¸…å•](#llm-prompt-æ¸…å•)
2. [ç›¸ä¼¼åº¦ä¸å¯ä¿¡åº¦è®¡ç®—](#ç›¸ä¼¼åº¦ä¸å¯ä¿¡åº¦è®¡ç®—)
3. [å®Œæ•´æ•°æ®æµ](#å®Œæ•´æ•°æ®æµ)

---

## 1. LLM Prompt æ¸…å•

### 1.1 è·¨å­¦ç§‘æ¦‚å¿µç”Ÿæˆ Promptï¼ˆæ ¸å¿ƒï¼‰

**ä½ç½®**ï¼š`backend/api/real_node_generator.py` - `generate_related_concepts()`

**ç”¨é€”**ï¼šä¸ºç»™å®šæ¦‚å¿µç”Ÿæˆè·¨å­¦ç§‘çš„"è¿œäº²æ¦‚å¿µ"

**System Prompt**ï¼š
```
ä½ æ˜¯è·¨å­¦ç§‘çŸ¥è¯†æŒ–æ˜ä¸“å®¶ï¼Œæ“…é•¿å‘ç°ä¸åŒé¢†åŸŸé—´çš„æ·±å±‚åŸç†å…³è”å’Œç»“æ„åŒæ„æ€§ã€‚
ä½ çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯è¯†åˆ«'è¿œäº²æ¦‚å¿µ' - é‚£äº›è¡¨é¢çœ‹èµ·æ¥æ¯«ä¸ç›¸å…³ï¼Œä½†åº•å±‚æ•°å­¦ã€ç‰©ç†
æˆ–ä¿¡æ¯è®ºåŸç†å®Œå…¨ä¸€è‡´çš„æ¦‚å¿µã€‚
```

**User Prompt**ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š
```python
prompt = f"""ä½ æ˜¯ä¸€ä¸ªè·¨å­¦ç§‘çŸ¥è¯†æŒ–æ˜ä¸“å®¶ã€‚è¯·ä¸ºæ¦‚å¿µ"{parent_concept}"æŒ–æ˜{max_count}ä¸ªè·¨é¢†åŸŸçš„ç›¸å…³æ¦‚å¿µã€‚

ã€æ ¸å¿ƒä»»åŠ¡ã€‘å‘ç°è·¨å­¦ç§‘çš„"è¿œäº²æ¦‚å¿µ" - ä¸åŒé¢†åŸŸä¸­åŸç†ç›¸é€šçš„æ¦‚å¿µ

ã€è·¨å­¦ç§‘æœç´¢ç­–ç•¥ã€‘
å¿…é¡»ä»ä»¥ä¸‹ä¸åŒé¢†åŸŸå¯»æ‰¾æ¦‚å¿µï¼ˆæ¯ä¸ªé¢†åŸŸè‡³å°‘1ä¸ªï¼‰ï¼š
1. æ•°å­¦/ç»Ÿè®¡å­¦ï¼šå¯»æ‰¾æ•°å­¦æœ¬è´¨ã€ç†è®ºåŸºç¡€
2. ç‰©ç†å­¦ï¼šå¯»æ‰¾ç‰©ç†ç±»æ¯”ã€èƒ½é‡/ä¿¡æ¯åŸç†
3. ç”Ÿç‰©å­¦/ç¥ç»ç§‘å­¦ï¼šå¯»æ‰¾ä»¿ç”Ÿå­¦å¯å‘ã€æ¼”åŒ–æœºåˆ¶
4. è®¡ç®—æœºç§‘å­¦ï¼šå¯»æ‰¾ç®—æ³•å®ç°ã€å·¥ç¨‹åº”ç”¨
5. ç¤¾ä¼šå­¦/ç»æµå­¦ï¼šå¯»æ‰¾ç¾¤ä½“è¡Œä¸ºã€åšå¼ˆæ¨¡å‹
6. å…¶ä»–äº¤å‰å­¦ç§‘ï¼šå¿ƒç†å­¦ã€è¯­è¨€å­¦ã€å¤æ‚ç³»ç»Ÿç­‰

ã€è¿œäº²æ¦‚å¿µåˆ¤å®šæ ‡å‡†ã€‘
âœ… å¥½çš„è¿œäº²æ¦‚å¿µï¼ˆå¿…é¡»æ»¡è¶³è‡³å°‘ä¸€æ¡ï¼‰ï¼š
- æ•°å­¦å½¢å¼ç›¸åŒä½†åº”ç”¨é¢†åŸŸä¸åŒï¼ˆå¦‚ï¼šç†µåœ¨çƒ­åŠ›å­¦vsä¿¡æ¯è®ºï¼‰
- åº•å±‚åŸç†ä¸€è‡´ï¼ˆå¦‚ï¼šç¥ç»ç½‘ç»œvsç”Ÿç‰©ç¥ç»å…ƒã€PageRank vséšæœºæ¸¸èµ°ï¼‰
- å†å²å¯å‘å…³ç³»ï¼ˆå¦‚ï¼šé—ä¼ ç®—æ³•vsè¾¾å°”æ–‡è¿›åŒ–è®ºï¼‰
- ç»“æ„åŒæ„ï¼ˆå¦‚ï¼šç¤¾äº¤ç½‘ç»œvsè›‹ç™½è´¨ç½‘ç»œï¼‰

âŒ é¿å…çš„è¡¨é¢å…³è”ï¼š
- ä»…ä»…åå­—ç›¸ä¼¼ï¼ˆå¦‚ï¼š"ç½‘ç»œ"åœ¨è®¡ç®—æœºç½‘ç»œvsç¥ç»ç½‘ç»œï¼‰
- å•çº¯çš„åº”ç”¨å…³ç³»ï¼ˆå¦‚ï¼šæœºå™¨å­¦ä¹ ç”¨äºåŒ»ç–—è¯Šæ–­ï¼‰

ã€çº¦æŸæ¡ä»¶ã€‘
- ä¸è¦åŒ…å«å·²å­˜åœ¨çš„æ¦‚å¿µï¼š{existing_str}
- æ¯ä¸ªæ¦‚å¿µå¿…é¡»æ¥è‡ªä¸åŒå­¦ç§‘ï¼ˆé¿å…æ‰å †ï¼‰
- å¿…é¡»è§£é‡Šè·¨å­¦ç§‘å…³è”çš„åº•å±‚åŸç†

ã€è¾“å‡ºæ ¼å¼ã€‘ï¼ˆæ¯è¡Œä¸€ä¸ªæ¦‚å¿µï¼‰
æ¦‚å¿µå|å­¦ç§‘|å…³ç³»ç±»å‹|è·¨å­¦ç§‘åŸç†

ç¤ºä¾‹ï¼š
ç¥ç»ç½‘ç»œ|ç”Ÿç‰©å­¦|bio_inspired|æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»å…ƒçš„çªè§¦è¿æ¥å’Œæ¿€æ´»ä¼ æ’­æœºåˆ¶
ä¿¡æ¯ç†µ|ç‰©ç†å­¦|mathematical_analogy|ä¸çƒ­åŠ›å­¦ç†µæ•°å­¦å½¢å¼å®Œå…¨ä¸€è‡´(H=-Î£pÂ·log(p))
PageRankç®—æ³•|å›¾è®º|structural_isomorphism|æœ¬è´¨æ˜¯é©¬å°”å¯å¤«é“¾çš„å¹³ç¨³åˆ†å¸ƒæ±‚è§£
é—ä¼ ç®—æ³•|è¿›åŒ–ç”Ÿç‰©å­¦|evolutionary_mechanism|å¤åˆ¶è¾¾å°”æ–‡çš„å˜å¼‚-é€‰æ‹©-é—ä¼ è¿›åŒ–è¿‡ç¨‹

è¯·ç›´æ¥è¾“å‡º{max_count}ä¸ªè·¨å­¦ç§‘æ¦‚å¿µï¼Œä¸è¦è§£é‡Šï¼š"""
```

**å‚æ•°é…ç½®**ï¼š
- `temperature=0.4`ï¼ˆæé«˜åˆ›é€ æ€§ï¼Œå…è®¸è·¨å­¦ç§‘è”æƒ³ï¼‰
- `max_tokens=800`ï¼ˆæ”¯æŒè¯¦ç»†çš„åŸç†è§£é‡Šï¼‰
- `timeout=20.0`ï¼ˆç»™reasoningæ¨¡å‹æ›´å¤šæ€è€ƒæ—¶é—´ï¼‰
- `extra_body={"reasoning": {"enabled": True}}`ï¼ˆå¯ç”¨Geminiæ¨ç†æ¨¡å¼ï¼‰

**è¾“å‡ºæ ¼å¼**ï¼š
```python
[
    {
        "name": "ç¥ç»ç½‘ç»œ",
        "discipline": "ç”Ÿç‰©å­¦",
        "relation": "bio_inspired",
        "cross_principle": "æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»å…ƒçš„çªè§¦è¿æ¥å’Œæ¿€æ´»ä¼ æ’­æœºåˆ¶"
    },
    # ...
]
```

---

### 1.2 ä¸€å¥è¯ç®€ä»‹ç”Ÿæˆ Prompt

**ä½ç½®**ï¼š`backend/api/routes.py` - `generate_brief_summary()`

**ç”¨é€”**ï¼šä¸ºæ¦‚å¿µç”Ÿæˆç®€æ´çš„ä¸€å¥è¯è§£é‡Š

**Prompt**ï¼š
```python
prompt = f"""è¯·ç”¨ä¸€å¥è¯ï¼ˆ50-80å­—ï¼‰ç®€æ´è§£é‡Šæ¦‚å¿µ"{concept}"ã€‚

{f"å‚è€ƒå®šä¹‰ï¼š{definition[:200]}" if definition else ""}

è¦æ±‚ï¼š
1. çªå‡ºæ ¸å¿ƒæœ¬è´¨ï¼Œé¿å…å†—é•¿æè¿°
2. ä½¿ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€
3. å¦‚æœæ˜¯è·¨å­¦ç§‘æ¦‚å¿µï¼Œè¯´æ˜å…¶ç‹¬ç‰¹ä¹‹å¤„
4. ä¸è¦ä½¿ç”¨"æ˜¯ä¸€ä¸ª..."ç­‰å¼€å¤´ï¼Œç›´æ¥æè¿°

ç›´æ¥è¾“å‡ºä¸€å¥è¯ï¼Œä¸è¦å‰ç¼€ï¼š"""
```

**å‚æ•°**ï¼š
- `temperature=0.3`
- `max_tokens=200`
- `extra_body={"reasoning": {"enabled": True}}`

**ç¤ºä¾‹è¾“å‡º**ï¼š
```
ç¥ç»ç½‘ç»œ â†’ "é€šè¿‡æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»å…ƒçš„è¿æ¥å’Œæ¿€æ´»æœºåˆ¶ï¼Œå®ç°å¤æ‚æ¨¡å¼è¯†åˆ«å’Œå­¦ä¹ çš„è®¡ç®—æ¨¡å‹ã€‚"
```

---

### 1.3 ä¸­è‹±æ–‡ç¿»è¯‘ Prompt

**ä½ç½®**ï¼š`backend/api/routes.py` - `translate_to_english()`

**ç”¨é€”**ï¼šå°†ä¸­æ–‡å­¦æœ¯æœ¯è¯­ç¿»è¯‘ä¸ºè‹±æ–‡ï¼ˆç”¨äºArxivè®ºæ–‡æ£€ç´¢ï¼‰

**Prompt**ï¼š
```python
"å°†ä»¥ä¸‹ä¸­æ–‡å­¦æœ¯æœ¯è¯­ç¿»è¯‘æˆè‹±æ–‡ï¼ˆåªè¾“å‡ºè‹±æ–‡ï¼Œä¸è¦è§£é‡Šï¼‰ï¼š{chinese_text}"
```

**System Prompt**ï¼š
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å­¦æœ¯ç¿»è¯‘åŠ©æ‰‹ï¼Œæ“…é•¿å°†ä¸­æ–‡å­¦æœ¯æœ¯è¯­ç¿»è¯‘æˆç²¾å‡†çš„è‹±æ–‡ã€‚
```

**å‚æ•°**ï¼š
- `temperature=0.1`ï¼ˆä½æ¸©åº¦ä¿è¯ç¿»è¯‘å‡†ç¡®æ€§ï¼‰
- `max_tokens=50`
- `extra_body={"reasoning": {"enabled": True}}`

**ç¤ºä¾‹**ï¼š
```
è¾“å…¥ï¼šé©¬å°”å¯å¤«ç†è®º
è¾“å‡ºï¼šMarkov theory
```

---

### 1.4 AIé—®ç­” Prompt

**ä½ç½®**ï¼š`backend/api/ai_chat.py` - `ai_chat()`

**ç”¨é€”**ï¼šåŸºäºæ¦‚å¿µèƒŒæ™¯å›ç­”ç”¨æˆ·é—®é¢˜

**System Prompt**ï¼š
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å­¦æœ¯åŠ©æ‰‹ï¼Œæ“…é•¿è§£ç­”è·¨å­¦ç§‘æ¦‚å¿µç›¸å…³çš„é—®é¢˜ã€‚
è¯·åŸºäºç”¨æˆ·æä¾›çš„æ¦‚å¿µèƒŒæ™¯ï¼Œç»™å‡ºä¸“ä¸šã€å‡†ç¡®ã€æ˜“æ‡‚çš„å›ç­”ã€‚
å›ç­”è¦æ±‚ï¼š
1. ç®€æ´æ˜äº†ï¼Œæ§åˆ¶åœ¨150å­—ä»¥å†…
2. ä¸“ä¸šå‡†ç¡®ï¼Œå¼•ç”¨å¯é çŸ¥è¯†
3. é€šä¿—æ˜“æ‡‚ï¼Œé€‚åˆéä¸“ä¸šè¯»è€…
4. å¦‚æœé—®é¢˜è¶…å‡ºæ¦‚å¿µèŒƒå›´ï¼Œç¤¼è²Œè¯´æ˜
```

**User Prompt**ï¼š
```python
f"""æ¦‚å¿µï¼š{request.concept}

{f'èƒŒæ™¯ä¿¡æ¯ï¼š{request.context[:300]}' if request.context else ''}

ç”¨æˆ·æé—®ï¼š{request.question}

è¯·å›ç­”ä¸Šè¿°é—®é¢˜ã€‚"""
```

**å‚æ•°**ï¼š
- `temperature=0.5`
- `max_tokens=300`
- `extra_body={"reasoning": {"enabled": True}}`

---

### 1.5 å­¦æœ¯æ¦‚å¿µè¿‡æ»¤ Prompt

**ä½ç½®**ï¼š`backend/api/real_node_generator.py` - `is_academic_concept()`

**ç”¨é€”**ï¼šåˆ¤æ–­è¾“å…¥æ˜¯å¦ä¸ºå­¦æœ¯æ¦‚å¿µï¼ˆè¿‡æ»¤åƒåœ¾è¾“å…¥ï¼‰

**Prompt**ï¼š
```
System: ä½ æ˜¯å­¦æœ¯æ¦‚å¿µè¿‡æ»¤å™¨ã€‚åˆ¤æ–­è¾“å…¥æ˜¯å¦ä¸ºå­¦æœ¯æ¦‚å¿µã€‚åªå›ç­”'æ˜¯'æˆ–'å¦'ã€‚
User: '{concept}' æ˜¯å­¦æœ¯æ¦‚å¿µå—ï¼Ÿ
```

**å‚æ•°**ï¼š
- `temperature=0.1`
- `max_tokens=10`
- `extra_body={"reasoning": {"enabled": True}}`

---

## 2. ç›¸ä¼¼åº¦ä¸å¯ä¿¡åº¦è®¡ç®—

### 2.1 è¯­ä¹‰ç›¸ä¼¼åº¦ï¼ˆSimilarityï¼‰

**ä½ç½®**ï¼š`backend/api/real_node_generator.py` - `compute_similarity()`

#### è®¡ç®—æ–¹æ³•ï¼šOpenAI Embeddings + ä½™å¼¦ç›¸ä¼¼åº¦

```python
async def compute_similarity(concept1: str, concept2: str) -> float:
    """
    è®¡ç®—ä¸¤ä¸ªæ¦‚å¿µçš„è¯­ä¹‰ç›¸ä¼¼åº¦
    
    æ–¹æ³•ï¼š
    1. ä½¿ç”¨OpenAI text-embedding-3-smallæ¨¡å‹è·å–å‘é‡è¡¨ç¤º
    2. è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼šcosine_sim = (v1 Â· v2) / (||v1|| * ||v2||)
    3. å½’ä¸€åŒ–åˆ°[0, 1]èŒƒå›´
    
    Args:
        concept1: æ¦‚å¿µ1
        concept2: æ¦‚å¿µ2ï¼ˆé€šå¸¸æ˜¯çˆ¶æ¦‚å¿µï¼‰
        
    Returns:
        ç›¸ä¼¼åº¦åˆ†æ•° [0, 1]
        - 1.0: å®Œå…¨ç›¸åŒ
        - 0.8-1.0: é«˜åº¦ç›¸å…³ï¼ˆå¼ºå…³è”ï¼‰
        - 0.6-0.8: ä¸­åº¦ç›¸å…³ï¼ˆæ‰©å±•æ¦‚å¿µï¼‰
        - 0.4-0.6: å¼±ç›¸å…³ï¼ˆè¾¹ç¼˜æ¦‚å¿µï¼‰
        - 0.0-0.4: å‡ ä¹æ— å…³
    """
    client = get_embedding_client()
    
    # è·å–embeddingsï¼ˆ1536ç»´å‘é‡ï¼‰
    response1 = await client.embeddings.create(
        model="text-embedding-3-small",
        input=concept1
    )
    response2 = await client.embeddings.create(
        model="text-embedding-3-small",
        input=concept2
    )
    
    embedding1 = np.array(response1.data[0].embedding)
    embedding2 = np.array(response2.data[0].embedding)
    
    # ä½™å¼¦ç›¸ä¼¼åº¦
    cosine_sim = np.dot(embedding1, embedding2) / (
        np.linalg.norm(embedding1) * np.linalg.norm(embedding2)
    )
    
    # å½’ä¸€åŒ–åˆ°[0, 1]
    similarity = float(max(0, min(1, (cosine_sim + 1) / 2)))
    
    return similarity
```

#### ç”¨é€”ï¼š
1. **å€™é€‰æ’åº**ï¼šå¯¹LLMç”Ÿæˆçš„å€™é€‰æ¦‚å¿µæŒ‰ç›¸ä¼¼åº¦æ’åº
2. **åŠ¨æ€ç­›é€‰**ï¼šåŸºäºç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.62ï¼‰ç­›é€‰é«˜è´¨é‡æ¦‚å¿µ
3. **è¾¹æƒé‡è®¡ç®—**ï¼šå›¾è°±è¾¹çš„æƒé‡åŸºäºç›¸ä¼¼åº¦
4. **å¯ä¿¡åº¦è®¡ç®—**ï¼šå½±å“æœ€ç»ˆçš„å¯ä¿¡åº¦åˆ†æ•°

#### ç¤ºä¾‹æ•°æ®ï¼š
```
ç¥ç»ç½‘ç»œ <-> æ·±åº¦å­¦ä¹ : 0.912ï¼ˆå¼ºå…³è”ï¼‰
ç¥ç»ç½‘ç»œ <-> ç”Ÿç‰©ç¥ç»å…ƒ: 0.782ï¼ˆè·¨å­¦ç§‘å…³è”ï¼‰
ç¥ç»ç½‘ç»œ <-> ç†µ: 0.234ï¼ˆå¼±å…³è”ï¼‰
```

---

### 2.2 å¯ä¿¡åº¦ï¼ˆCredibilityï¼‰

**ä½ç½®**ï¼š`backend/api/real_node_generator.py` - `compute_credibility()`

#### è®¡ç®—æ–¹æ³•ï¼šæ¥æºå¯ä¿¡åº¦ Ã— ç›¸ä¼¼åº¦åŠ æƒ

```python
async def compute_credibility(
    concept: str,
    parent_concept: str,
    has_wikipedia: bool = False
) -> float:
    """
    è®¡ç®—èŠ‚ç‚¹å¯ä¿¡åº¦
    
    å…¬å¼: base_credibility * (0.7 + 0.3 * similarity)
    
    Args:
        concept: å½“å‰æ¦‚å¿µ
        parent_concept: çˆ¶æ¦‚å¿µ
        has_wikipedia: æ˜¯å¦æœ‰Wikipediaå®šä¹‰
        
    Returns:
        å¯ä¿¡åº¦åˆ†æ•° [0, 1]
        
    è®¡ç®—é€»è¾‘ï¼š
    1. åŸºç¡€å¯ä¿¡åº¦ï¼š
       - WikipediaéªŒè¯ï¼š0.95ï¼ˆæƒå¨æ¥æºï¼‰
       - ä»…LLMç”Ÿæˆï¼š0.70ï¼ˆéœ€è¦éªŒè¯ï¼‰
    
    2. ç›¸ä¼¼åº¦åŠ æƒï¼š
       - é«˜ç›¸ä¼¼åº¦æ¦‚å¿µè·å¾—æ›´é«˜å¯ä¿¡åº¦
       - æƒé‡åˆ†é…ï¼š70%åŸºç¡€ + 30%ç›¸ä¼¼åº¦
    
    3. æœ€ç»ˆèŒƒå›´ï¼š
       - æœ€é«˜ï¼š0.95 Ã— (0.7 + 0.3 Ã— 1.0) = 0.950
       - æœ€ä½ï¼š0.70 Ã— (0.7 + 0.3 Ã— 0.0) = 0.490
    """
    # åŸºç¡€å¯ä¿¡åº¦
    base = 0.95 if has_wikipedia else 0.70
    
    # è®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦
    similarity = await compute_similarity(concept, parent_concept)
    
    # åŠ¨æ€å¯ä¿¡åº¦
    credibility = base * (0.7 + 0.3 * similarity)
    
    print(f"[INFO] å¯ä¿¡åº¦: {concept} = {credibility:.3f} (base={base}, similarity={similarity:.3f})")
    
    return credibility
```

#### ç”¨é€”ï¼š
1. **èŠ‚ç‚¹æ’åº**ï¼šå±•ç¤ºæ—¶ä¼˜å…ˆæ˜¾ç¤ºé«˜å¯ä¿¡åº¦èŠ‚ç‚¹
2. **å¯è§†åŒ–åé¦ˆ**ï¼šèŠ‚ç‚¹å¤§å°/é¢œè‰²åŸºäºå¯ä¿¡åº¦
3. **è´¨é‡ä¿è¯**ï¼šè¿‡æ»¤ä½å¯ä¿¡åº¦æ¦‚å¿µ
4. **ç”¨æˆ·ä¿¡ä»»**ï¼šå‘ç”¨æˆ·å±•ç¤ºæ•°æ®è´¨é‡è¯„ä¼°

#### ç¤ºä¾‹è®¡ç®—ï¼š
```
æ·±åº¦å­¦ä¹ ï¼ˆWikipedia, ç›¸ä¼¼åº¦0.912ï¼‰:
  å¯ä¿¡åº¦ = 0.95 Ã— (0.7 + 0.3 Ã— 0.912) = 0.95 Ã— 0.974 = 0.925

ç¥ç»å…ƒï¼ˆLLM, ç›¸ä¼¼åº¦0.782ï¼‰:
  å¯ä¿¡åº¦ = 0.70 Ã— (0.7 + 0.3 Ã— 0.782) = 0.70 Ã— 0.935 = 0.654
```

---

### 2.3 ç›¸ä¼¼åº¦ vs å¯ä¿¡åº¦å¯¹æ¯”

| ç»´åº¦ | ç›¸ä¼¼åº¦ï¼ˆSimilarityï¼‰ | å¯ä¿¡åº¦ï¼ˆCredibilityï¼‰ |
|------|---------------------|---------------------|
| **å®šä¹‰** | æ¦‚å¿µé—´çš„è¯­ä¹‰å…³è”ç¨‹åº¦ | èŠ‚ç‚¹æ•°æ®çš„è´¨é‡è¯„ä¼° |
| **è®¡ç®—æ–¹æ³•** | OpenAI Embeddings + ä½™å¼¦ç›¸ä¼¼åº¦ | æ¥æºå¯ä¿¡åº¦ Ã— ç›¸ä¼¼åº¦åŠ æƒ |
| **å–å€¼èŒƒå›´** | [0, 1] | [0.49, 0.95] |
| **å½±å“å› ç´ ** | ä»…æ¦‚å¿µè¯­ä¹‰ | æ¥æº + è¯­ä¹‰ç›¸ä¼¼åº¦ |
| **ä¸»è¦ç”¨é€”** | æ’åºã€ç­›é€‰ã€è¾¹æƒé‡ | è´¨é‡è¯„ä¼°ã€å¯è§†åŒ– |
| **å‰ç«¯æ˜¾ç¤º** | "ä¸æœç´¢è¯çš„ç›¸å…³åº¦" | "å¯ä¿¡åº¦åˆ†æ•°" |
| **è®¡ç®—æˆæœ¬** | é«˜ï¼ˆAPIè°ƒç”¨ï¼‰ | ä¸­ï¼ˆä¾èµ–ç›¸ä¼¼åº¦ï¼‰ |

---

## 3. å®Œæ•´æ•°æ®æµ

### 3.1 Discoveræµç¨‹ï¼ˆæ¦‚å¿µå‘ç°ï¼‰

```
ç”¨æˆ·è¾“å…¥æ¦‚å¿µ
    â†“
[1] æŸ¥è¯¢Wikipediaå®šä¹‰
    â†“
[2] LLMç”Ÿæˆ20ä¸ªå€™é€‰æ¦‚å¿µï¼ˆè·¨å­¦ç§‘Promptï¼‰
    â”œâ”€ System: è·¨å­¦ç§‘çŸ¥è¯†æŒ–æ˜ä¸“å®¶
    â”œâ”€ User: 6å¤§é¢†åŸŸæœç´¢ç­–ç•¥ + è¿œäº²æ¦‚å¿µæ ‡å‡†
    â””â”€ Output: [æ¦‚å¿µå|å­¦ç§‘|å…³ç³»|åŸç†]
    â†“
[3] å¹¶è¡Œè®¡ç®—ç›¸ä¼¼åº¦ï¼ˆOpenAI Embeddingsï¼‰
    â”œâ”€ æ¯ä¸ªå€™é€‰ <-> è¾“å…¥æ¦‚å¿µ
    â””â”€ ä½™å¼¦ç›¸ä¼¼åº¦ â†’ [0, 1]
    â†“
[4] åŠ¨æ€é˜ˆå€¼ç­›é€‰
    â”œâ”€ é˜ˆå€¼ï¼š0.62
    â”œâ”€ æœ€å°ï¼š3ä¸ª
    â””â”€ æœ€å¤§ï¼š9ä¸ª
    â†“
[5] ä¸ºæ¯ä¸ªæ¦‚å¿µè·å–Wikipediaå®šä¹‰
    â†“
[6] è®¡ç®—åŠ¨æ€å¯ä¿¡åº¦
    â”œâ”€ base = 0.95 (Wikipedia) / 0.70 (LLM)
    â””â”€ credibility = base Ã— (0.7 + 0.3 Ã— similarity)
    â†“
[7] LLMç”Ÿæˆä¸€å¥è¯ç®€ä»‹
    â†“
è¿”å›èŠ‚ç‚¹å’Œè¾¹æ•°æ®
```

### 3.2 Expandæµç¨‹ï¼ˆèŠ‚ç‚¹å±•å¼€ï¼‰

```
ç”¨æˆ·ç‚¹å‡»èŠ‚ç‚¹
    â†“
[1] LLMç”Ÿæˆå€™é€‰æ¦‚å¿µï¼ˆ2xæ•°é‡ï¼‰
    â”œâ”€ åŒæ ·ä½¿ç”¨è·¨å­¦ç§‘Prompt
    â””â”€ æ’é™¤å·²å­˜åœ¨çš„èŠ‚ç‚¹
    â†“
[2] è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆä¸çˆ¶èŠ‚ç‚¹ï¼‰
    â†“
[3] åŠ¨æ€é˜ˆå€¼ç­›é€‰ï¼ˆ0.62ï¼‰
    â†“
[4] è·å–Wikipediaå®šä¹‰
    â†“
[5] è®¡ç®—å¯ä¿¡åº¦
    â†“
[6] ç”Ÿæˆç®€ä»‹
    â†“
åˆ›å»ºæ–°èŠ‚ç‚¹å’Œè¾¹
```

### 3.3 æ•°æ®ç»“æ„ç¤ºä¾‹

```json
{
  "nodes": [
    {
      "id": "neural_network_biology_1",
      "label": "ç¥ç»ç½‘ç»œ",
      "discipline": "ç”Ÿç‰©å­¦",
      "definition": "ç”±ç›¸äº’è¿æ¥çš„ç¥ç»å…ƒç»„æˆçš„ç½‘ç»œ...",
      "brief_summary": "é€šè¿‡æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»å…ƒå®ç°æ¨¡å¼è¯†åˆ«...",
      "credibility": 0.887,
      "similarity": 0.782,
      "source": "Wikipedia",
      "wiki_url": "https://zh.wikipedia.org/wiki/ç¥ç»ç½‘ç»œ",
      "depth": 1,
      "cross_principle": "æ¨¡æ‹Ÿç”Ÿç‰©ç¥ç»å…ƒçš„çªè§¦è¿æ¥æœºåˆ¶"
    }
  ],
  "edges": [
    {
      "source": "center_node",
      "target": "neural_network_biology_1",
      "relation": "bio_inspired",
      "weight": 0.804,
      "reasoning": "ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ å…·æœ‰bio_inspiredå…³ç³»ï¼ˆç›¸ä¼¼åº¦: 0.78ï¼‰"
    }
  ]
}
```

---

## 4. å…³é”®å‚æ•°é…ç½®

### 4.1 ç›¸ä¼¼åº¦é˜ˆå€¼

```python
SIMILARITY_THRESHOLD = 0.62  # ç»è¿‡æµ‹è¯•æ•°æ®åˆ†æç¡®å®š
```

**é€‰æ‹©ä¾æ®**ï¼š
- åˆ†æäº†å¤šä¸ªæµ‹è¯•æ¡ˆä¾‹çš„ç›¸ä¼¼åº¦åˆ†å¸ƒ
- é©¬å°”å¯å¤«ç†è®º: 0.782, 0.739, 0.737, 0.732, 0.679, 0.647...
- é˜ˆå€¼0.62èƒ½ä¿è¯ï¼š
  - é«˜è´¨é‡æ¦‚å¿µï¼ˆ>0.70ï¼‰: 100%ä¿ç•™
  - ä¸­ç­‰è´¨é‡ï¼ˆ0.62-0.70ï¼‰: é€‰æ‹©æ€§ä¿ç•™
  - ä½è´¨é‡ï¼ˆ<0.62ï¼‰: è¿‡æ»¤æ‰

### 4.2 èŠ‚ç‚¹æ•°é‡èŒƒå›´

```python
MIN_NODES = 3  # ä¿è¯è¶³å¤Ÿæ¢ç´¢å¹¿åº¦
MAX_NODES = 9  # é¿å…ä¿¡æ¯è¿‡è½½
```

### 4.3 LLMå‚æ•°

```python
# è·¨å­¦ç§‘ç”Ÿæˆ
temperature=0.4  # å¹³è¡¡åˆ›é€ æ€§å’Œå‡†ç¡®æ€§
max_tokens=800   # æ”¯æŒè¯¦ç»†è§£é‡Š

# ç¿»è¯‘
temperature=0.1  # ä¿è¯å‡†ç¡®æ€§
max_tokens=50

# ç®€ä»‹ç”Ÿæˆ
temperature=0.3  # ç¨é«˜åˆ›é€ æ€§
max_tokens=200

# é—®ç­”
temperature=0.5  # æ›´é«˜åˆ›é€ æ€§
max_tokens=300
```

---

## 5. å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šç¥ç»ç½‘ç»œ

**è¾“å…¥**ï¼šç¥ç»ç½‘ç»œ

**LLMç”Ÿæˆçš„è·¨å­¦ç§‘æ¦‚å¿µ**ï¼š
```
1. ç”Ÿç‰©ç¥ç»å…ƒ|ç¥ç»ç§‘å­¦|bio_inspired|ç›¸ä¼¼åº¦0.782
2. éœæ™®è²å°”å¾·ç½‘ç»œ|ç»Ÿè®¡ç‰©ç†|energy_model|ç›¸ä¼¼åº¦0.721
3. è´å¶æ–¯ç½‘ç»œ|æ¦‚ç‡è®º|probabilistic_reasoning|ç›¸ä¼¼åº¦0.698
4. å›¾è®º|æ•°å­¦|structural_foundation|ç›¸ä¼¼åº¦0.645
5. æ·±åº¦å­¦ä¹ |è®¡ç®—æœºç§‘å­¦|sub_field|ç›¸ä¼¼åº¦0.912
```

**å¯ä¿¡åº¦è®¡ç®—**ï¼š
```
ç”Ÿç‰©ç¥ç»å…ƒï¼ˆWikipediaï¼‰: 0.95 Ã— (0.7 + 0.3Ã—0.782) = 0.887
éœæ™®è²å°”å¾·ç½‘ç»œï¼ˆLLMï¼‰: 0.70 Ã— (0.7 + 0.3Ã—0.721) = 0.641
```

---

## 6. ä¼˜åŒ–å»ºè®®

### 6.1 å·²å®ç°
- âœ… è·¨å­¦ç§‘å¼ºåˆ¶æœç´¢
- âœ… åŠ¨æ€ç›¸ä¼¼åº¦é˜ˆå€¼
- âœ… Gemini 3 Flashæ¨ç†æ¨¡å¼
- âœ… å¤šç»´åº¦è´¨é‡è¯„ä¼°

### 6.2 å¾…ä¼˜åŒ–
- ğŸ”„ ç›¸ä¼¼åº¦ç¼“å­˜ï¼ˆå‡å°‘APIè°ƒç”¨ï¼‰
- ğŸ”„ æ‰¹é‡embeddingè®¡ç®—ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
- ğŸ”„ ç”¨æˆ·åé¦ˆæœºåˆ¶ï¼ˆç›¸ä¼¼åº¦æ ¡å‡†ï¼‰
- ğŸ”„ å¤šæ¨¡å‹å¯¹æ¯”ï¼ˆéªŒè¯è´¨é‡ï¼‰

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**ï¼š2026å¹´1æœˆ21æ—¥  
**LLMæ¨¡å‹**ï¼šgoogle/gemini-3-flash-preview (with reasoning)  
**Embeddingæ¨¡å‹**ï¼štext-embedding-3-small (OpenAI)
